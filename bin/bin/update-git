#!/bin/bash
#
# ------------------------------------------------------
#  create static git pages for personal website locally
#  using stagit and regular old git-core.
# ------------------------------------------------------
#

outputdir="/home/whoami/gits/stagit"

green=`tput setaf 2`
magenta=`tput setaf 5`
white=`tput setaf 7`
blue=`tput setaf 4`
reset=`tput sgr0`


echo 
echo "${white}:: ${magenta}Generating git static pages ${white}::"
cd $outputdir
echo "${blue}"
rm index.html
rm -R */

./run.sh
echo 
echo "${white}:: ${magenta}Uploading static pages to vps ${white}::"
cd ../
echo
echo "${blue}"
lftp -u {user},{password} sftp://{url} << EOF
cd /var/www/code
rm index.html
cd /var/www
mirror -R --only-newer --ignore-time "code/"
cd code
rm run.sh
bye
EOF

echo 
echo "${white}:: ${magenta}done ${white}::${reset}"
echo

