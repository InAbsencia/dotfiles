#!/usr/bin/env sh
INTERFACE=$(ls /sys/class/net | grep "\bw.*")
[ -z "$INTERFACE" ] && exit

WCONNECTED=$(cat /sys/class/net/w*/operstate)
if [ "$WCONNECTED" = 'down' ]; then
    printf "󰤯 Down\n"
else
    SSID=$(nmcli device show | grep "$INTERFACE" -m 1 -A 5 | grep GENERAL.CONNECTION: -m 1 | awk '{print $2}')
    printf "󰤨 %s\n" "$SSID"
fi
